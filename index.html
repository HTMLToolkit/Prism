<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prism | Gradient Viewer</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="card">
      <h2 id="title">Prism</h2>
      <p id="guide">Enter a CSS gradient or make your own...</p>
      <input type="text" id="gradientInput" />
      <div class="gradients">
        <button
          class="gradientBtn"
          style="background: linear-gradient(to right, #ff6a00, #ee0979);"
          data-gradient="linear-gradient(to right, #ff6a00, #ee0979)"
        >
          Sunset
        </button>
        <button
          class="gradientBtn"
          style="background: linear-gradient(to right, #00f260, #0575e6);"
          data-gradient="linear-gradient(to right, #00f260, #0575e6)"
        >
          Ocean
        </button>
        <button
          class="gradientBtn"
          style="background: linear-gradient(to right, #f7971e, #ffd200);"
          data-gradient="linear-gradient(to right, #f7971e, #ffd200)"
        >
          Gold
        </button>
        <button
          class="gradientBtn"
          style="background: linear-gradient(to right, #00c6ff, #0072ff);"
          data-gradient="linear-gradient(to right, #00c6ff, #0072ff)"
        >
          Sky
        </button>
        <button
          class="gradientBtn"
          style="background: linear-gradient(to right, #8e2de2, #4a00e0);"
          data-gradient="linear-gradient(to right, #8e2de2, #4a00e0)"
        >
          Purple
        </button>
      </div>
      <div class="colorPickers" id="colorPickers"></div>
      <div class="stopControls">
        <button id="addStop">+ Add Stop</button>
        <button id="removeStop">âˆ’ Remove Stop</button>
      </div>
      <button class="gradientBtn" style="background: #00c6ff" id="install-button" hidden>Install App</button>
    </div>
    <script src="main.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Register the service worker
        if ("serviceWorker" in navigator) {
          navigator.serviceWorker.register("service-worker.js");
        }

        let deferredPrompt;
        const installButton = document.getElementById("install-button");

        // Listen for the install prompt
        window.addEventListener("beforeinstallprompt", (e) => {
          e.preventDefault();
          deferredPrompt = e;
          installButton.hidden = false;
        });

        // Handle install button click
        installButton.addEventListener("click", async () => {
          const isStandalone =
            window.matchMedia("(display-mode: standalone)").matches ||
            window.navigator.standalone;

          if (isStandalone) {
            console.log("App is already installed");
            return;
          }

          if (deferredPrompt) {
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            deferredPrompt = null;
            console.log(
              outcome === "accepted"
                ? "User accepted install prompt"
                : "User dismissed install prompt"
            );
          } else {
            if (window.matchMedia("(display-mode: browser)").matches) {
              window.location.assign("chrome://apps/");
            }
          }
        });
      });
    </script>
  </body>
</html>
